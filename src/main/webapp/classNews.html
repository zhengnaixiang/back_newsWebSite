<!DOCTYPE html>
<html lang="utf-8">
<head>
    <meta charset="UTF-8">
    <title>新闻分类管理</title>
    <link rel="stylesheet" href="bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="css/font-awesome.min.css">
    <link rel="stylesheet" href="css/main.css">
    <style>
        .tree li {
            list-style-type: none;
            cursor:pointer;
        }
        table tbody tr:nth-child(odd){background:#F4F4F4;}
        table tbody td:nth-child(even){color:#C00;}
    </style>
</head>
<body>
<div id="top"></div>
<div class="container-fluid">
    <div class="row">
        <div id="left"></div>
        <div class="col-sm-9 col-sm-offset-3 col-md-10 col-md-offset-2 main">
            <div class="panel panel-default">
                <div class="panel-heading">
                    <h3 class="panel-title"><i class="glyphicon glyphicon-th"></i> 数据列表</h3>
                </div>
                <div class="panel-body">
                    <form class="form-inline" role="form" style="float:left;">
                        <div class="form-group has-feedback">
                          <!--  <div class="input-group">
                                <div class="input-group-addon">标题</div>
                                <input id="titleText" value="" class="form-control has-success" type="text" placeholder="请输入查询条件">
                            </div>-->
                            <div class="input-group">
                                <div class="input-group-addon">名称</div>
                                <input id="nameText" class="form-control has-success" type="text" placeholder="请输入查询条件">
                            </div>
                            <div class="input-group">
                                <div class="input-group-addon">文章总数</div>
                                <input id="countText" class="form-control has-success" type="text" placeholder="请输入查询条件">
                            </div>
                        </div>
                        <button type="button" class="btn btn-warning"><i class="glyphicon glyphicon-search"></i> 查询</button>
                    </form>
                    <button type="button" class="btn btn-danger" style="float:right;margin-left:10px;"><i class=" glyphicon glyphicon-remove"></i> 删除</button>
                    <button type="button" class="btn btn-primary" style="float:right;" onclick="window.location.href='addClassNews.html'"><i class="glyphicon glyphicon-plus"></i> 新增</button>
                    <br>
                    <hr style="clear:both;">
                    <div class="table-responsive">
                        <table class="table  table-bordered" id="classesTable">
                            <thead>
                            <tr >
                                <th width="30">ID</th>
                                <th width="30"><input id="BigFlag" type="checkbox"></th>
                                <th>名称</th>
                                <th>文章总数</th>
                                <th width="130">操作</th>
                            </tr>
                            </thead>
                            <tbody id="classesTbody">
                            <!--<tr>-->
                                <!--<td>id</td>-->
                                <!--<td><input class="ids" type="checkbox" value="id"/></td>-->
                                <!--<td>京雄城际铁路北京段具备铺轨条件</td>-->
                                <!--<td>100</td>-->
                                <!--<td>-->
                                    <!--<button type="button" class="btn btn-success btn-xs" onclick="window.location.href='editClassNews.html'" ><i class=" glyphicon glyphicon-pencil"></i>编辑</button>-->
                                    <!--<button type="button" class="btn btn-danger btn-xs"><i class=" glyphicon glyphicon-remove"></i>删除</button>-->
                                <!--</td>-->
                            <!--</tr>-->
                            </tbody>
                        </table>
                        <tfoot >
                        <tr >
                            <td>
                                <ul class="pagination" align="center">
                                    <li class="disabled"><a href="#">上一页</a></li>
                                    <li class="active"><a href="#">1 <span class="sr-only">(current)</span></a></li>
                                    <li><a href="#">2</a></li>
                                    <li><a href="#">3</a></li>
                                    <li><a href="#">4</a></li>
                                    <li><a href="#">5</a></li>
                                    <li><a href="#">下一页</a></li>
                                </ul>
                            </td>
                        </tr>
                        </tfoot>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
</body>
<script src="jquery/jquery-2.1.1.min.js"></script>
<script src="bootstrap/js/bootstrap.min.js"></script>
<script src="script/docs.min.js"></script>
<script type="text/javascript">
    $(function () {
        init();
    });

    function init(){
        var classesName = $("#nameText").val().trim();
        $("#classesTable  tr:not(:first)").empty("");
        console.log("初始化页面");
            $.ajax({
                type: 'POST',
                url: 'getClassesCountList',
                contentType: "application/json; charset=utf-8",
                success: function (response) {
                    $(response).each(function (index, item) {
                        $("#classesTbody").append("<tr>" +
                            "<td>" + item.class_id + "</td>" +
                            "<td><input type=\"checkbox\"></td>" +
                            "<td>" + item.class_name + "</td>" +
                            "<td>" + item.num + "</td>" +
                            "<td>" + "<button type=\"button\" class=\"btn btn-success btn-xs\" onclick=\"window.location.href='editClassNews.html'\" ><i class=\" glyphicon glyphicon-pencil\"></i>编辑</button>\n" +
                            "<button type=\"button\" class=\"btn btn-danger btn-xs\"><i class=\" glyphicon glyphicon-remove\"></i>删除</button>" +
                            "</td>")
                    })
                },
                error: function (response) {
                    console.log("失败");
                    console.log(response)
                },
                dataType: "json"
            });


    }
    $(function () {
        $("#top").load("head.html");
        $("#left").load("left.html");

        var total = $(".ids").length;
        var count = 0;
        var flag;
        // 全选同步
        $("#BigFlag").click(function () {
            flag = $(this).prop("checked");
            $(".ids").prop("checked", flag);
            if (flag){
                count = total;
            } else {
                count = 0;
            }
        });

        // 多选操作
        $(".ids").click(function () {
            flag = $(this).prop("checked");
            if (flag) {
                if (++count == total) {
                    $("#BigFlag").prop("checked", true);
                }
            } else {
                count--;
                $("#BigFlag").prop("checked", false);
            }
        });
    });
</script>
</html>